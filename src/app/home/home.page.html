<ion-header [translucent]="true">
  <ion-toolbar class="home-toolbar">
    <ion-buttons slot="start">
      <ion-button (click)="goBack()" fill="clear">
        <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title class="toolbar-title">
      <div class="title-container">
        <ion-icon name="receipt" class="title-icon"></ion-icon>
        <span>{{ listType === 1 ? 'Put Away' : 'Pick Up' }} List</span>
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="home-content">
  <div class="page-container">
    
    <!-- Page Header -->
    <!-- <div class="page-header">
      <h1>{{ listType === 1 ? 'Inward Invoices' : 'Pickup Orders' }}</h1>
      <p class="page-description">Select an item to view details and start processing</p>
    </div> -->

    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-wrapper">
        <ion-icon name="search" class="search-icon"></ion-icon>
        <input 
          class="search-input" 
          type="text" 
          placeholder="Search by GRN reference..." 
          [(ngModel)]="searchTerm" 
          (input)="onSearchChange()" 
        />
        <ion-button 
          *ngIf="searchTerm" 
          (click)="clearSearch()" 
          fill="clear" 
          class="clear-btn"
          size="small">
          <ion-icon name="close-circle" slot="icon-only"></ion-icon>
        </ion-button>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading-container">
      <ion-spinner name="crescent" color="primary"></ion-spinner>
      <p>Loading invoices...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-container">
      <ion-icon name="alert-circle" color="danger"></ion-icon>
      <p>{{ error }}</p>
    </div>

    <!-- Invoice List -->
    <div *ngIf="!loading && !error && filteredInvoiceList.length" class="invoice-list">
      <div 
        *ngFor="let invoice of filteredInvoiceList; let i = index" 
        class="invoice-card" 
        (click)="onGrnClick(invoice)">
        
        <div class="card-header">
          <div class="icon-wrapper">
            <ion-icon name="document-text"></ion-icon>
          </div>
          <div class="invoice-number">
            <span class="label">{{ listType === 1 ? 'GRN' : 'Invoice' }}</span>
            <h3>{{ invoice.grnRef }}</h3>
          </div>
        </div>

        <div class="card-body">
          <div class="info-row">
            <div class="info-item">
              <ion-icon name="list-outline" color="primary"></ion-icon>
              <div class="info-content">
                <span class="info-label">Total Items</span>
                <span class="info-value">{{ getTotalItems(invoice) }}</span>
              </div>
            </div>
            <div class="info-item">
              <ion-icon name="cube-outline" color="primary"></ion-icon>
              <div class="info-content">
                <span class="info-label">Quantity</span>
                <span class="info-value">{{ getTotalQuantity(invoice) }}</span>
              </div>
            </div>
          </div>
        </div>

        <div class="card-footer">
          <span class="view-action">
            View Details
            <ion-icon name="arrow-forward"></ion-icon>
          </span>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && !error && !filteredInvoiceList.length" class="empty-container">
      <div class="empty-icon">
        <ion-icon name="file-tray-outline"></ion-icon>
      </div>
      <h3>No Invoices Found</h3>
      <p>{{ searchTerm ? 'Try adjusting your search terms' : 'No invoices available at the moment' }}</p>
    </div>

  </div>
</ion-content>
